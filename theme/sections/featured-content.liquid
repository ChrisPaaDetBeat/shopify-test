{% assign settings = section.settings %}
{% assign blocks = section.blocks %}

{% assign tiles_have_padding = settings.tiles_with_padding %}

{% if blocks %}
  <section class="featuredContent section">
    <div class="featuredContent_tiles{% if tiles_have_padding %} featuredContent_tiles-padded{% endif %}">
      {% for block in blocks %}
        {% assign block_id = block.id %}
        {% assign block_settings = block.settings %}
        {% assign heading = block_settings.heading %}
        {% assign link = block_settings.link %}
        {% assign link_text = block_settings.button_1_text %}
        {% assign image_desktop = block_settings.image_desktop %}
        {% assign image_mobile = block_settings.image_mobile %}
        {% assign text_colour = block_settings.text_colour | prepend: 'color: ' | append: ';' %}
        {% assign background_image_url = block_settings.image_desktop | img_url: '420x', format: 'pjpg', scale: 2 %}

        <a href="{{ link }}" class="featuredContent_tile" id="{{ block_id }}">
          <div class="lazy featuredContent_image" data-bg="url({{ background_image_url }})"></div>
          <div style="{{ text_colour }}" class="featuredContent_details">
            <h2>{{ heading }}</h2>
            <div class="featuredContent_text">{{ link_text }}</div>
          </div>
        </a>

      {% endfor %}
    </div>
  </section>    
{% endif %}

{% schema %}
  {
    "name": "Featured Content",
    "max_blocks": 6,
    "settings": [
      {
        "type": "header",
        "content": "Options"
      },
      {
        "type": "checkbox",
        "id": "tiles_with_padding",
        "label": "Tiles with padding",
        "default": true
      }
    ],
    "blocks": [
      {
        "type": "block",
        "name": "Block",
        "settings": [
          {
            "type": "header",
            "content": "General"
          },
          {
            "type": "header",
            "content": "Images"
          },
          {
            "type": "image_picker",
            "id": "image_desktop",
            "label": "Image (Desktop/Tablet)",
            "info": "Recommended 1200px width"
          },
          {
            "type": "image_picker",
            "id": "image_mobile",
            "label": "Image (Mobile)",
            "info": "Recommended 768px width"
          },
          {
            "type": "header",
            "content": "Text"
          },
          {
            "type": "textarea",
            "id": "heading",
            "label": "Heading"
          },
          {
            "type": "header",
            "content": "Text Options"
          },
          {
            "type": "color",
            "id": "text_colour",
            "label": "Text colour",
            "default": "#ffffff"
          },
          {
            "type": "header",
            "content": "Link"
          },
          {
            "type": "url",
            "id": "link",
            "label": "Link"
          },
          {
            "type": "header",
            "content": "Button 1"
          },
          {
            "type": "text",
            "id": "button_1_text",
            "label": "Text",
            "default": "Shop now"
          },
          {
            "type": "url",
            "id": "button_1_link",
            "label": "Link"
          },
          {
            "type": "header",
            "content": "Button 2"
          },
          {
            "type": "text",
            "id": "button_2_text",
            "label": "Text",
            "default": "Shop now"
          },
          {
            "type": "url",
            "id": "button_2_link",
            "label": "Link"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Featured Content",
        "category": "Image",
        "settings": {}
      }
    ]
  }
{% endschema %}
